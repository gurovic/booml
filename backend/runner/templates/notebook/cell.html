<div class="cell" data-cell-id="{{ cell.id }}" data-cell-type="{{ cell.cell_type }}">
    <div class="cell-header">
        <div class="cell-title">
            Ячейка {{ cell.execution_order|add:1 }}
        </div>
        <div class="cell-actions">
            {% if cell.cell_type == cell.CODE %}
                <button type="button" data-action="run-cell">Запустить</button>
            {% endif %}
            <button type="button" data-action="delete-cell">Удалить</button>
        </div>
        {% if cell.cell_type == cell.CODE %}
            <div class="cell-status-indicator" data-cell-status data-status="idle">Ожидание</div>
        {% endif %}
    </div>

    {% if cell.cell_type == cell.TEXT %}
    <div class="cell-content text-cell" data-text-container>
        <div class="text-display" data-text-display>
            {{ cell.content|safe }}
        </div>

        <div class="text-editor" data-text-editor hidden>
            <textarea data-text-textarea>{{ cell.content }}</textarea>

            <div class="text-editor-actions">
                <button type="button" data-action="save-text">Сохранить</button>
                <button type="button" data-action="cancel-text">Отмена</button>
            </div>
        </div>

        <div class="text-actions">
            <button type="button" data-action="edit-text">Редактировать</button>
        </div>
    </div>
    {% endif %}

    {% if cell.cell_type == cell.LATEX %}
        <div class="cell-content latex-cell" data-latex-container>
            <div class="latex-display" data-latex-display>{{ cell.content }}</div>
            <div class="latex-editor" data-latex-editor hidden>
                <textarea data-latex-textarea disabled placeholder="Введите ваш LaTeX или текст здесь...">{{ cell.content }}</textarea>
                <div class="latex-editor-actions">
                    <button type="button" data-action="save-latex">Сохранить</button>
                    <button type="button" data-action="cancel-latex">Отмена</button>
                </div>
            </div>
            <div class="latex-actions">
                <button type="button" data-action="edit-latex">Редактировать</button>
            </div>
        </div>
    {% elif cell.cell_type == cell.CODE %}
        <div class="cell-content">
            <textarea placeholder="Введите ваш код здесь...">{{ cell.content }}</textarea>
            <div class="output" id="output-{{ cell.id }}">
                {% if cell.output %}{{ cell.output|safe }}{% endif %}
            </div>
            <div class="cell-artifacts" id="artifacts-{{ cell.id }}"></div>
        </div>
    {% endif %}
</div>