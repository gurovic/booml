<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Редактирование задачи {{ problem.id }}</title>
</head>
<body>
  <p><a href="{% url 'runner:polygon' %}">← Назад к списку задач</a></p>
  <h1>Редактирование задачи №{{ problem.id }}</h1>

  <form method="post">
    {% csrf_token %}
    <div class="top-fields">
      <div class="form-group">
        <label for="title-input">Название</label>
        <input id="title-input" type="text" name="title" value="{{ form_data.title }}" required>
        {% if errors.title %}
          <div class="errors">{{ errors.title }}</div>
        {% endif %}
      </div>
      <div class="form-group">
        <label for="rating-input">Рейтинг</label>
        <input id="rating-input" type="number" name="rating" min="800" max="3000" value="{{ form_data.rating }}" required>
        {% if errors.rating %}
          <div class="errors">{{ errors.rating }}</div>
        {% endif %}
      </div>
    </div>

    <div class="form-group">
      <label for="statement-input">Условие задачи</label>
      <textarea id="statement-input" name="statement" placeholder="Опишите условие задачи...">{{ form_data.statement }}</textarea>
    </div>

    <h2>Descriptor</h2>
    <div class="top-fields">
      <div class="form-group">
        <label for="id-column-input">Колонка идентификатора</label>
        <input id="id-column-input" type="text" name="id_column" value="{{ descriptor_form_data.id_column }}" required>
        {% if descriptor_errors.id_column %}
          <div class="errors">{{ descriptor_errors.id_column }}</div>
        {% endif %}
      </div>
      <div class="form-group">
        <label for="id-type-select">Тип идентификатора</label>
        <select id="id-type-select" name="id_type" required>
          {% for value,label in id_type_choices %}
            <option value="{{ value }}" {% if descriptor_form_data.id_type == value %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
        {% if descriptor_errors.id_type %}
          <div class="errors">{{ descriptor_errors.id_type }}</div>
        {% endif %}
      </div>
    </div>

    <div class="top-fields">
      <div class="form-group">
        <label for="target-column-input">Колонка ответа</label>
        <input id="target-column-input" type="text" name="target_column" value="{{ descriptor_form_data.target_column }}" required>
        {% if descriptor_errors.target_column %}
          <div class="errors">{{ descriptor_errors.target_column }}</div>
        {% endif %}
      </div>
      <div class="form-group">
        <label for="target-type-select">Тип ответа</label>
        <select id="target-type-select" name="target_type" required>
          {% for value,label in target_type_choices %}
            <option value="{{ value }}" {% if descriptor_form_data.target_type == value %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
        {% if descriptor_errors.target_type %}
          <div class="errors">{{ descriptor_errors.target_type }}</div>
        {% endif %}
      </div>
    </div>

    <div class="form-group" style="flex-direction: row; align-items: center; gap: 8px;">
      <input id="check-order-checkbox" type="checkbox" name="check_order" {% if descriptor_form_data.check_order %}checked{% endif %}>
      <label for="check-order-checkbox" style="font-weight: normal;">Проверять порядок строк в ответе</label>
    </div>

    <div class="actions">
      <button type="submit">Сохранить изменения</button>
    </div>
  </form>
</body>
</html>
