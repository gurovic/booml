<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Результат проверки</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    pre.json { background:#f8f9fa; padding:12px; border-radius:6px; max-height:420px; overflow:auto; white-space:pre-wrap; }
    .metric-name { font-weight:600; }
  </style>
</head>
<body class="p-4">
<div class="container">
  <h1>Результат проверки</h1>

  <div class="mb-3">
    <strong>Статус:</strong>
    {% if submission.status == "accepted" %}
      <span class="badge bg-success">Accepted</span>
    {% elif submission.status == "wrong" %}
      <span class="badge bg-danger">Wrong Answer</span>
    {% elif submission.status == "timeout" %}
      <span class="badge bg-warning text-dark">Time Limit</span>
    {% elif submission.status %}
      <span class="badge bg-secondary">{{ submission.status|upper }}</span>
    {% else %}
      <span class="text-muted">—</span>
    {% endif %}
  </div>

  <div class="row mb-3">
    <div class="col-md-3"><strong>Время:</strong> {{ submission.time_ms|default:"—" }} ms</div>
    <div class="col-md-3"><strong>Память:</strong> {{ submission.memory_kb|default:"—" }} KB</div>
    <div class="col-md-3"><strong>Problem:</strong> {{ submission.problem_code|default:"—" }}</div>
    <div class="col-md-3"><strong>User:</strong> {{ submission.user_display|default:"—" }}</div>
  </div>

  <h5>Метрики качества</h5>
  {% if submission.metrics %}
    <table class="table table-sm">
      <thead><tr><th>Метрика</th><th>Значение</th></tr></thead>
      <tbody>
        {% for m in submission.metrics %}
          <tr><td class="metric-name">{{ m.name }}</td><td>{{ m.value }}</td></tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted">Метрики отсутствуют.</p>
  {% endif %}

  <h5>Логи</h5>
  {% if submission.logs %}
    <pre class="json">{{ submission.logs }}</pre>
  {% else %}
    <p class="text-muted">Логов нет.</p>
  {% endif %}

  <h5>Ошибки</h5>
  {% if submission.errors %}
    <ul>
      {% for e in submission.errors %}
        <li><pre style="display:inline; margin:0; white-space:pre-wrap;">{{ e }}</pre></li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted">Ошибок не обнаружено.</p>
  {% endif %}

  <h6 class="mt-4">Raw JSON</h6>
  <pre class="json">{{ raw_pretty }}</pre>
</div>
</body>
</html>
