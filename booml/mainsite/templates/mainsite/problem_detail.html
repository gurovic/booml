<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ problem.title }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            line-height: 1.6;
            background-color: #f9f9f9;
        }

        article {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        h1 {
            margin-bottom: 0.2em;
        }

        h2 {
            margin-top: 1.2em;
            color: #444;
        }

        pre {
            background: #eee;
            padding: 10px;
            border-radius: 6px;
            overflow-x: auto;
        }

        .meta {
            color: #666;
            font-size: 0.9em;
        }

        a.back {
            display: inline-block;
            margin-top: 20px;
            text-decoration: none;
            color: #007acc;
        }

        a.back:hover {
            text-decoration: underline;
        }

        /* Стили для табов */
        .tabs {
            margin-top: 20px;
        }

        .tab-buttons {
            display: flex;
            border-bottom: 2px solid #ccc;
        }

        .tab-buttons button {
            background: none;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1em;
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
        }

        .tab-buttons button.active {
            border: 2px solid #ccc;
            border-bottom: 2px solid #fff;
            background: #fff;
        }

        .tab-content {
            display: none;
            padding: 20px 0;
        }

        .tab-content.active {
            display: block;
        }

        .upload-section {
            display: flex;
            gap: 20px;
        }

        .upload-section .upload-btn {
            flex: 1;
        }

        .upload-section .history {
            flex: 2;
            background: #f5f5f5;
            padding: 10px;
            border-radius: 6px;
            max-height: 200px;
            overflow-y: auto;
        }

    </style>
</head>
<body>
    <article>
        <header>
            <h1>{{ problem.title }}</h1>
        </header>

        <div class="tabs">
            <div class="tab-buttons">
                <button class="active" onclick="openTab(event, 'description')">Описание задачи</button>
                <a href="/problem/{{problem.id}}/submit"><button>Загрузка решения</button></a>
            </div>

            <!-- Первый таб: Описание задачи -->
            <div id="description" class="tab-content active">
                <section>
                    <h2>Условие задачи</h2>
                    <div>{{ problem.condition|linebreaks }}</div>
                </section>
                <section>
                    {% if problem.data %}
                      <h2>Данные</h2>
                      {% if problem.data.train_csv %}
                        <a href="{{ problem.data.train_csv.url }}">Скачать train.csv</a>
                      {% endif %}
                      {% if problem.data.test_csv %}
                        <a href="{{ problem.data.test_csv.url }}">Скачать test.csv</a>
                      {% endif %}
                      <p>Метрика: {{ problem.data.get_metric_display }}</p>
                    {% else %}
                      <p>Для этой задачи нет загруженных данных.</p>
                    {% endif %}
                </section>
                <section>
                    <h2>Опубликовано</h2>
                    <div>{{ problem.created_at|linebreaks }}</div>
                </section>
            </div>
        </div>
    </article>

    <a href="javascript:history.back()" class="back">← Назад</a>

    <script>
        function openTab(event, tabId) {
            // Скрываем все табы
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-buttons button').forEach(btn => btn.classList.remove('active'));

            // Показываем выбранный
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }
    </script>
</body>
</html>
